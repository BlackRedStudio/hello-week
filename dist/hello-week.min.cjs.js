"use strict";function _interopNamespace(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),t.default=e,t}Object.defineProperty(exports,"__esModule",{value:!0});const cssClasses={CALENDAR:"hello-week",DAY:"day",MONTH:"month",NAVIGATION:"navigation",NEXT:"next",PERIOD:"period",PREV:"prev",RTL:"rtl",WEEK:"week"},cssStates={IS_BEGIN_RANGE:"is-begin-range",IS_DISABLED:"is-disabled",IS_END_RANGE:"is-end-range",IS_HIGHLIGHT:"is-highlight",IS_SELECTED:"is-selected",IS_RANGE:"is-range",IS_TODAY:"is-today",IS_WEEKEND:"is-weekend"},daysWeek={FRIDAY:5,MONDAY:1,SATURDAY:6,SUNDAY:0,THURSDAY:4,TUESDAY:2,WEDNESDAY:3},margins={RIGHT:"margin-right",LEFT:"margin-left"},defaults={selector:".hello-week",lang:"en",langFolder:"./langs/",format:"DD/MM/YYYY",monthShort:!1,weekShort:!0,defaultDate:null,minDate:null,maxDate:null,disableDaysOfWeek:null,timezoneOffset:(new Date).getTimezoneOffset(),disableDates:null,weekStart:0,daysSelected:null,daysHighlight:null,multiplePick:!1,disablePastDays:!1,todayHighlight:!0,range:!1,locked:!1,rtl:!1,nav:["◀","▶"],onLoad:()=>{},onClear:()=>{},onNavigation:()=>{},onSelect:e=>e,beforeCreateDay:e=>e};function isDef(e){return null!=e}function isObject(e){return null!==e&&"object"==typeof e}function isArray(e){return null!==e&&Array.isArray(e)}function isString(e){return"string"==typeof e}function render(e,t){if(e.split)return document.createTextNode(e);const s=document.createElement(e.nodeName);return isDef(e.attributes)&&diffProps(e,s),(e.children||[]).forEach(e=>s.appendChild(render(e))),t?t.appendChild(s):s}function diffProps(e,t){for(const s of Object.keys(e.attributes))"class"===s?classProps(e,t,s):"style"===s?styleProps(e,t,s):"data"===s?dataProps(e,t,s):setAttr(t,s,e.attributes[s])}function dataProps(e,t,s){for(const a of Object.keys(e.attributes[s]))setAttr(t,`data-${s}`,e.attributes[s][a])}function classProps(e,t,s){isString(e.attributes[s])?t.className=e.attributes[s]:isArray(e.attributes[s])&&e.attributes[s].forEach(e=>{addClass(t,e)})}function styleProps(e,t,s){if(isString(e.attributes[s]))t.style=e.attributes[s];else if(isObject(e.attributes[s]))for(const a of Object.keys(e.attributes[s]))t.style[a]=e.attributes[s][a]}function h(e,t,...s){const a={nodeName:e};return t&&(a.attributes=t),s.length&&(a.children=[].concat(...s)),a}function setAttr(e,t,s){return e.setAttribute(t,s)}function addClass(e,t){return e.classList.add(t)}function removeClass(e,t){return e.classList.remove(t)}function toggleClass(e,t){return e.classList.toggle(t)}function existElement(e,t){return isDef(t)?t.querySelector(`.${e}`):document.querySelector(`.${e}`)}function extend(e,t){return Object.assign(e,t)}function getIndexForEventTarget(e,t){return Array.prototype.slice.call(e).indexOf(t)+1}function toDate(e,t){const s=setTimeZone(e,t);return defaultFormat(s.getDate(),s.getMonth(),s.getFullYear())}function defaultFormat(e,t,s){return`${s}-${("0"+(t+1)).slice(-2)}-${("0"+e).slice(-2)}`}function formatDate(e,t,s,a){const i=setTimeZone(e,a);return s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=s||defaults.format).replace("dd",i.getDate().toString())).replace("DD",(i.getDate()>9?i.getDate():"0"+i.getDate()).toString())).replace("mm",(i.getMonth()+1).toString())).replace("MMM",t.months[i.getMonth()])).replace("MM",(i.getMonth()+1>9?i.getMonth()+1:"0"+(i.getMonth()+1)).toString())).replace("mmm",t.monthsShort[i.getMonth()])).replace("yyyy",i.getFullYear().toString())).replace("YYYY",i.getFullYear().toString())).replace("YY",i.getFullYear().toString().substring(2))).replace("yy",i.getFullYear().toString().substring(2))}function setTimeZone(e,t){const s=isDef(e)?new Date(e):new Date;return t=t||s.getTimezoneOffset(),s.setTime(s.getTime()+60*t*1e3),s}function formatDateToCompare(e){const t=new Date(e);return Number(""+t.getFullYear()+(t.getMonth()+1)+(t.getDate()>9?t.getDate():"0"+t.getDate()).toString())}function isAfter(e,t){return formatDateToCompare(e)>formatDateToCompare(t)}function isBefore(e,t){return formatDateToCompare(e)<formatDateToCompare(t)}function isBetween(e,t,s){return isAfter(s,e)&&isBefore(s,t)}function isSame(e,t){return formatDateToCompare(e)===formatDateToCompare(t)}function isSameOrAfter(e,t){return isSame(e,t)||isAfter(e,t)}function isSameOrBefore(e,t){return isSame(e,t)||isBefore(e,t)}function template(e,t){const s={};if(!isDef(e.selector))throw new Error("You need to specify a selector!");return isString(e.selector)?s.selector=e.selector?document.querySelector(e.selector):e.selector:s.selector=e.selector,isDef(s.selector)?e.selector!==cssClasses.CALENDAR&&addClass(s.selector,cssClasses.CALENDAR):s.selector=render(h("div",{class:[e.selector,cssClasses.CALENDAR]})),s.calendar={},s.calendar.navigation=existElement(cssClasses.NAVIGATION,s.selector),isDef(s.calendar.navigation)||(s.calendar.navigation=render(h("div",{class:cssClasses.NAVIGATION}),s.selector)),isDef(e.nav[0])&&(s.calendar.prevMonth=render(h("div",{class:cssClasses.PREV},e.nav[0]),s.calendar.navigation),s.calendar.prevMonth.addEventListener("click",()=>t.prev.cb())),s.calendar.period=existElement(cssClasses.PERIOD,s.selector),isDef(s.calendar.period)||(s.calendar.period=render(h("div",{class:cssClasses.PERIOD}),s.calendar.navigation)),isDef(e.nav[1])&&(s.calendar.nextMonth=render(h("div",{class:cssClasses.NEXT},e.nav[1]),s.calendar.navigation),s.calendar.nextMonth.addEventListener("click",()=>t.next.cb())),s.calendar.week=existElement(cssClasses.WEEK,s.selector),isDef(s.calendar.week)||(s.calendar.week=render(h("div",{class:cssClasses.WEEK}),s.selector)),s.calendar.month=existElement(cssClasses.MONTH,s.selector),isDef(s.calendar.month)||(s.calendar.month=render(h("div",{class:cssClasses.MONTH}),s.selector)),e.rtl&&(addClass(s.calendar.week,cssClasses.RTL),addClass(s.calendar.month,cssClasses.RTL)),s}function getIntervalOfDates(e,t,s){const a=[];let i=e;const r=function(e){const t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t.getTime()};for(;i<=t;)a.push(formatDate(i,s)),i=r.call(i,1);return a}function date(e){return isDef(e)?new Date(e):new Date}function setMinDate(e){const t=date(e);return toDate(t.setDate(t.getDate()-1))}function setMaxDate(e){const t=date(e);return toDate(t.setDate(t.getDate()+1))}class HelloWeek{constructor(e){this.todayDate=toDate(new Date),this.date=new Date,this.intervalRange={},this.daysSelected=[],this.props=extend(extend({},defaults),e),this.prevProps=extend(extend({},defaults),e);const{calendar:t,selector:s}=template(this.props,{prev:{cb:()=>this.prev()},next:{cb:()=>this.next()}});this.selector=s,this.calendar=t,this.isRTL=this.props.rtl?margins.RIGHT:margins.LEFT,new Promise(function(e){e(_interopNamespace(require(this.props.langFolder+this.props.lang+".js")))}).then(e=>e.default).then(e=>{this.langs=e,this.willMount()})}destroy(){this.removeStatesClass(),this.selector.remove()}prev(e){const t=this.date.getMonth()-1;this.date.setMonth(t),this.update(),this.props.onNavigation(),e&&e()}next(e){const t=this.date.getMonth()+1;this.date.setMonth(t),this.update(),this.props.onNavigation(),e&&e()}update(){this.clearCalendar(),this.mount()}reset(e,t){this.clearCalendar(),this.props=extend(this.prevProps,e),this.willMount(t)}goToDate(e=this.todayDate){this.date=new Date(e),this.date.setDate(1),this.update()}getDaySelected(){return this.daysSelected.sort((e,t)=>formatDateToCompare(e)-formatDateToCompare(t)).map(e=>formatDate(e,this.langs,this.props.format))}getLastDaySelected(){return this.lastSelectedDay}getDaysHighlight(){return this.daysHighlight}getMonth(){return this.date.getMonth()+1}getYear(){return this.date.getFullYear()}setDaysHighlight(e){this.daysHighlight=[...this.daysHighlight,...e]}setMultiplePick(e){this.props.multiplePick=e}setDisablePastDays(e){this.props.disablePastDays=e}setTodayHighlight(e){this.props.todayHighlight=e}setRange(e){isArray(this.props.range)?(this.intervalRange.begin=this.props.range[0],this.intervalRange.end=this.props.range[1]):this.props.range=e}setLocked(e){this.props.locked=e}setMinDate(e){this.props.minDate=setMinDate(e)}setMaxDate(e){this.props.maxDate=setMaxDate(e)}willMount(e){if(this.daysHighlight=this.props.daysHighlight?this.props.daysHighlight:[],this.daysSelected=this.props.daysSelected?this.props.daysSelected:[],this.daysSelected.length&&!this.props.multiplePick)throw new Error(`There are ${this.daysSelected.length} dates selected, but the multiplePick option is FALSE!`);this.props.defaultDate&&(this.date=setTimeZone(this.props.defaultDate,this.props.timezoneOffset),this.defaultDate=setTimeZone(this.props.defaultDate,this.props.timezoneOffset),this.defaultDate.setDate(this.defaultDate.getDate())),this.date.setDate(1),this.props.minDate&&this.setMinDate(this.props.minDate),this.props.maxDate&&this.setMaxDate(this.props.maxDate),this.props.range&&this.setRange(this.props.range),this.mount(),this.props.onLoad(),e&&e()}selectDay(e){this.daysOfMonth=this.selector.querySelectorAll("."+cssClasses.MONTH+" ."+cssClasses.DAY);for(const t of Object.keys(this.daysOfMonth))this.handleClickInteraction(this.daysOfMonth[t],e),this.props.range&&this.handleMouseInteraction(this.daysOfMonth[t])}handleClickInteraction(e,t){e.addEventListener("click",e=>{const s=getIndexForEventTarget(this.daysOfMonth,e.target);this.days[s].locked||(this.lastSelectedDay=this.days[s].date,this.props.range||(this.props.multiplePick?(this.days[s].date&&(this.daysSelected=this.daysSelected.filter(e=>formatDateToCompare(e)!==formatDateToCompare(this.lastSelectedDay))),this.days[s].isSelected||this.daysSelected.push(this.lastSelectedDay)):(this.days[s].locked||this.removeStatesClass(),this.daysSelected=[],this.daysSelected.push(this.lastSelectedDay))),toggleClass(e.target,cssStates.IS_SELECTED),this.days[s].isSelected=!this.days[s].isSelected,this.props.range&&(this.intervalRange.begin&&this.intervalRange.end&&(this.intervalRange={},this.removeStatesClass()),this.intervalRange.begin&&!this.intervalRange.end&&(this.intervalRange.end=this.days[s].date,this.daysSelected=getIntervalOfDates(this.intervalRange.begin,this.intervalRange.end,this.langs),addClass(e.target,cssStates.IS_END_RANGE),this.intervalRange.begin>this.intervalRange.end&&(this.intervalRange={},this.removeStatesClass())),this.intervalRange.begin||(this.intervalRange.begin=this.days[s].date),addClass(e.target,cssStates.IS_SELECTED)),this.props.onSelect(this.days[s]),t&&t(this.days[s]))})}handleMouseInteraction(e){e.addEventListener("mouseover",e=>{const t=getIndexForEventTarget(this.daysOfMonth,e.target);if(!(!this.intervalRange.begin||this.intervalRange.begin&&this.intervalRange.end)){this.removeStatesClass();for(let e=1;e<=Object.keys(this.days).length;e++)this.days[e].isSelected=!1,isSameOrAfter(this.days[t].date,this.intervalRange.begin)&&isSameOrAfter(this.days[e].date,this.intervalRange.begin)&&isSameOrBefore(this.days[e].date,this.days[t].date)&&(addClass(this.days[e].element,cssStates.IS_SELECTED),addClass(this.days[e].element,cssStates.IS_RANGE),isSame(this.days[e].date,this.intervalRange.begin)&&addClass(this.days[e].element,cssStates.IS_BEGIN_RANGE))}})}creatWeek(e){render(h("span",{class:cssClasses.DAY},e),this.calendar.week)}createMonth(){const e=this.date.getMonth();for(;this.date.getMonth()===e;)this.createDay(this.date),this.date.setDate(this.date.getDate()+1);this.date.setMonth(this.date.getMonth()-1),this.selectDay()}createDay(e){const t=e.getDate(),s=e.getDay();let a={day:t,date:toDate(e),isWeekend:!1,locked:!1,isToday:!1,isRange:!1,isSelected:!1,isHighlight:!1,attributes:{class:[cssClasses.DAY],style:{}},node:void 0,element:void 0};this.days=this.days||{},s!==daysWeek.SUNDAY&&s!==daysWeek.SATURDAY||(a.attributes.class.push(cssStates.IS_WEEKEND),a.isWeekend=!0),(this.props.locked||this.props.disableDaysOfWeek&&this.props.disableDaysOfWeek.includes(s)||this.props.disablePastDays&&isSameOrBefore(this.date,this.defaultDate)||this.props.minDate&&isSameOrAfter(this.props.minDate,a.date)||this.props.maxDate&&isSameOrBefore(this.props.maxDate,a.date))&&(a.attributes.class.push(cssStates.IS_DISABLED),a.locked=!0),this.props.disableDates&&this.disabledDays(a),this.props.todayHighlight&&isSame(this.todayDate,a.date)&&(a.attributes.class.push(cssStates.IS_TODAY),a.isToday=!0),this.daysSelected.find(e=>{isSame(e,a.date)&&(a.attributes.class.push(cssStates.IS_SELECTED),a.isSelected=!0)}),isBetween(this.intervalRange.begin,this.intervalRange.end,a.date)&&(a.attributes.class.push(cssStates.IS_RANGE),a.isRange=!0),isSame(a.date,this.intervalRange.begin)&&a.attributes.class.push(cssStates.IS_BEGIN_RANGE),isSame(a.date,this.intervalRange.end)&&a.attributes.class.push(cssStates.IS_END_RANGE),this.daysHighlight&&this.highlightDays(a),1===a.day&&(this.props.weekStart===daysWeek.SUNDAY?a.attributes.style[this.isRTL]=s*(100/Object.keys(daysWeek).length)+"%":s===daysWeek.SUNDAY?a.attributes.style[this.isRTL]=(Object.keys(daysWeek).length-this.props.weekStart)*(100/Object.keys(daysWeek).length)+"%":a.attributes.style[this.isRTL]=(s-1)*(100/Object.keys(daysWeek).length)+"%"),a.node=h("div",a.attributes,a.day.toString()),(a=this.props.beforeCreateDay(a)).element=render(a.node,this.calendar.month),this.days[a.day]=a}disabledDays(e){isArray(this.props.disableDates[0])?this.props.disableDates.map(t=>{isSameOrAfter(e.date,t[0])&&isSameOrBefore(e.date,t[1])&&(e.attributes.class.push(cssStates.IS_DISABLED),e.locked=!0)}):this.props.disableDates.map(t=>{isSame(e.date,t)&&(e.attributes.class.push(cssStates.IS_DISABLED),e.locked=!0)})}highlightDays(e){for(const t in this.daysHighlight)this.daysHighlight[t].days[0]instanceof Array?this.daysHighlight[t].days.map(s=>{isSameOrAfter(e.date,s[0])&&isSameOrBefore(e.date,s[1])&&this.computedAttributes(t,e)}):this.daysHighlight[t].days.map(s=>{isSame(e.date,s)&&this.computedAttributes(t,e)})}computedAttributes(e,t){const{attributes:s,days:a,...i}=this.daysHighlight[e];t=extend(t,i);for(const e in s)t.attributes[e]&&s[e]?t.attributes[e]=extend(t.attributes[e],s[e]):s[e]&&(t.attributes[e]=s[e]);t.attributes.class.push(cssStates.IS_HIGHLIGHT),t.isHighlight=!0}monthsAsString(e){return this.props.monthShort?this.langs.monthsShort[e]:this.langs.months[e]}weekAsString(e){return this.props.weekShort?this.langs.daysShort[e]:this.langs.days[e]}mount(){this.calendar.period&&(this.calendar.period.innerHTML=this.monthsAsString(this.date.getMonth())+" "+this.date.getFullYear());const e=[];this.calendar.week.textContent="";for(let t=this.props.weekStart;t<this.langs.daysShort.length;t++)e.push(t);for(let t=0;t<this.props.weekStart;t++)e.push(t);for(const t of e)this.creatWeek(this.weekAsString(t));this.createMonth()}clearCalendar(){this.calendar.month.textContent=""}removeStatesClass(){for(const e of Object.keys(this.daysOfMonth))removeClass(this.daysOfMonth[e],cssStates.IS_SELECTED),removeClass(this.daysOfMonth[e],cssStates.IS_RANGE),removeClass(this.daysOfMonth[e],cssStates.IS_BEGIN_RANGE),removeClass(this.daysOfMonth[e],cssStates.IS_END_RANGE),this.days[+e+1].isSelected=!1}}const HelloWeek$1=HelloWeek;window.HelloWeek=HelloWeek$1,exports.HelloWeek=HelloWeek$1,exports.createElement=h,exports.default=HelloWeek,exports.el=h,exports.render=render;
