!function(t){"use strict";const e={CALENDAR:"hello-week",DAY:"day",MONTH:"month",NAVIGATION:"navigation",NEXT:"next",PERIOD:"period",PREV:"prev",RTL:"rtl",WEEK:"week"},s={IS_BEGIN_RANGE:"is-begin-range",IS_DISABLED:"is-disabled",IS_END_RANGE:"is-end-range",IS_HIGHLIGHT:"is-highlight",IS_SELECTED:"is-selected",IS_RANGE:"is-range",IS_TODAY:"is-today",IS_WEEKEND:"is-weekend"},a={FRIDAY:5,MONDAY:1,SATURDAY:6,SUNDAY:0,THURSDAY:4,TUESDAY:2,WEDNESDAY:3},i={RIGHT:"margin-right",LEFT:"margin-left"},n={selector:".hello-week",lang:"en",langFolder:"./langs/",format:"DD/MM/YYYY",monthShort:!1,weekShort:!0,defaultDate:null,minDate:null,maxDate:null,disableDaysOfWeek:null,timezoneOffset:(new Date).getTimezoneOffset(),disableDates:null,weekStart:0,daysSelected:null,daysHighlight:null,multiplePick:!1,disablePastDays:!1,todayHighlight:!0,range:!1,locked:!1,rtl:!1,nav:["◀","▶"],onLoad:()=>{},onClear:()=>{},onNavigation:()=>{},onSelect:t=>t,beforeCreateDay:t=>t};function r(t){return null!=t}function h(t){return null!==t&&Array.isArray(t)}function o(t){return"string"==typeof t}function l(t,e){if(t.split)return document.createTextNode(t);const s=document.createElement(t.nodeName);return r(t.attributes)&&function(t,e){for(const s of Object.keys(t.attributes))"class"===s?c(t,e,s):"style"===s?g(t,e,s):"data"===s?d(t,e,s):u(e,s,t.attributes[s])}(t,s),(t.children||[]).forEach(t=>s.appendChild(l(t))),e?e.appendChild(s):s}function d(t,e,s){for(const a of Object.keys(t.attributes[s]))u(e,`data-${s}`,t.attributes[s][a])}function c(t,e,s){o(t.attributes[s])?e.className=t.attributes[s]:h(t.attributes[s])&&t.attributes[s].forEach(t=>{y(e,t)})}function g(t,e,s){if(o(t.attributes[s]))e.style=t.attributes[s];else if(null!==(a=t.attributes[s])&&"object"==typeof a)for(const a of Object.keys(t.attributes[s]))e.style[a]=t.attributes[s][a];var a}function p(t,e,...s){const a={nodeName:t};return e&&(a.attributes=e),s.length&&(a.children=[].concat(...s)),a}function u(t,e,s){return t.setAttribute(e,s)}function y(t,e){return t.classList.add(e)}function D(t,e){return t.classList.remove(e)}function S(t,e){return r(e)?e.querySelector(`.${t}`):document.querySelector(`.${t}`)}function f(t,e){return Object.assign(t,e)}function b(t,e){return Array.prototype.slice.call(t).indexOf(e)+1}function m(t,e){const s=v(t,e);return a=s.getDate(),i=s.getMonth(),`${s.getFullYear()}-${("0"+(i+1)).slice(-2)}-${("0"+a).slice(-2)}`;var a,i}function E(t,e,s,a){const i=v(t,a);return s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=s||n.format).replace("dd",i.getDate().toString())).replace("DD",(i.getDate()>9?i.getDate():"0"+i.getDate()).toString())).replace("mm",(i.getMonth()+1).toString())).replace("MMM",e.months[i.getMonth()])).replace("MM",(i.getMonth()+1>9?i.getMonth()+1:"0"+(i.getMonth()+1)).toString())).replace("mmm",e.monthsShort[i.getMonth()])).replace("yyyy",i.getFullYear().toString())).replace("YYYY",i.getFullYear().toString())).replace("YY",i.getFullYear().toString().substring(2))).replace("yy",i.getFullYear().toString().substring(2))}function v(t,e){const s=r(t)?new Date(t):new Date;return e=e||s.getTimezoneOffset(),s.setTime(s.getTime()+60*e*1e3),s}function R(t){const e=new Date(t);return Number(""+e.getFullYear()+(e.getMonth()+1)+(e.getDate()>9?e.getDate():"0"+e.getDate()).toString())}function A(t,e){return R(t)>R(e)}function k(t,e){return R(t)<R(e)}function M(t,e){return R(t)===R(e)}function I(t,e){return M(t,e)||A(t,e)}function N(t,e){return M(t,e)||k(t,e)}function T(t){return r(t)?new Date(t):new Date}function O(t){const e=T(t);return m(e.setDate(e.getDate()-1))}function w(t){const e=T(t);return m(e.setDate(e.getDate()+1))}class L{constructor(t){this.todayDate=m(new Date),this.date=new Date,this.intervalRange={},this.daysSelected=[],this.props=f(f({},n),t),this.prevProps=f(f({},n),t);const{calendar:s,selector:a}=function(t,s){const a={};if(!r(t.selector))throw new Error("You need to specify a selector!");return o(t.selector)?a.selector=t.selector?document.querySelector(t.selector):t.selector:a.selector=t.selector,r(a.selector)?t.selector!==e.CALENDAR&&y(a.selector,e.CALENDAR):a.selector=l(p("div",{class:[t.selector,e.CALENDAR]})),a.calendar={},a.calendar.navigation=S(e.NAVIGATION,a.selector),r(a.calendar.navigation)||(a.calendar.navigation=l(p("div",{class:e.NAVIGATION}),a.selector)),r(t.nav[0])&&(a.calendar.prevMonth=l(p("div",{class:e.PREV},t.nav[0]),a.calendar.navigation),a.calendar.prevMonth.addEventListener("click",()=>s.prev.cb())),a.calendar.period=S(e.PERIOD,a.selector),r(a.calendar.period)||(a.calendar.period=l(p("div",{class:e.PERIOD}),a.calendar.navigation)),r(t.nav[1])&&(a.calendar.nextMonth=l(p("div",{class:e.NEXT},t.nav[1]),a.calendar.navigation),a.calendar.nextMonth.addEventListener("click",()=>s.next.cb())),a.calendar.week=S(e.WEEK,a.selector),r(a.calendar.week)||(a.calendar.week=l(p("div",{class:e.WEEK}),a.selector)),a.calendar.month=S(e.MONTH,a.selector),r(a.calendar.month)||(a.calendar.month=l(p("div",{class:e.MONTH}),a.selector)),t.rtl&&(y(a.calendar.week,e.RTL),y(a.calendar.month,e.RTL)),a}(this.props,{prev:{cb:()=>this.prev()},next:{cb:()=>this.next()}});this.selector=a,this.calendar=s,this.isRTL=this.props.rtl?i.RIGHT:i.LEFT,import(this.props.langFolder+this.props.lang+".js").then(t=>t.default).then(t=>{this.langs=t,this.willMount()})}destroy(){this.removeStatesClass(),this.selector.remove()}prev(t){const e=this.date.getMonth()-1;this.date.setMonth(e),this.update(),this.props.onNavigation(),t&&t()}next(t){const e=this.date.getMonth()+1;this.date.setMonth(e),this.update(),this.props.onNavigation(),t&&t()}update(){this.clearCalendar(),this.mount()}reset(t,e){this.clearCalendar(),this.props=f(this.prevProps,t),this.willMount(e)}goToDate(t=this.todayDate){this.date=new Date(t),this.date.setDate(1),this.update()}getDaySelected(){return this.daysSelected.sort((t,e)=>R(t)-R(e)).map(t=>E(t,this.langs,this.props.format))}getLastDaySelected(){return this.lastSelectedDay}getDaysHighlight(){return this.daysHighlight}getMonth(){return this.date.getMonth()+1}getYear(){return this.date.getFullYear()}setDaysHighlight(t){this.daysHighlight=[...this.daysHighlight,...t]}setMultiplePick(t){this.props.multiplePick=t}setDisablePastDays(t){this.props.disablePastDays=t}setTodayHighlight(t){this.props.todayHighlight=t}setRange(t){h(this.props.range)?(this.intervalRange.begin=this.props.range[0],this.intervalRange.end=this.props.range[1]):this.props.range=t}setLocked(t){this.props.locked=t}setMinDate(t){this.props.minDate=O(t)}setMaxDate(t){this.props.maxDate=w(t)}willMount(t){if(this.daysHighlight=this.props.daysHighlight?this.props.daysHighlight:[],this.daysSelected=this.props.daysSelected?this.props.daysSelected:[],this.daysSelected.length&&!this.props.multiplePick)throw new Error(`There are ${this.daysSelected.length} dates selected, but the multiplePick option is FALSE!`);this.props.defaultDate&&(this.date=v(this.props.defaultDate,this.props.timezoneOffset),this.defaultDate=v(this.props.defaultDate,this.props.timezoneOffset),this.defaultDate.setDate(this.defaultDate.getDate())),this.date.setDate(1),this.props.minDate&&this.setMinDate(this.props.minDate),this.props.maxDate&&this.setMaxDate(this.props.maxDate),this.props.range&&this.setRange(this.props.range),this.mount(),this.props.onLoad(),t&&t()}selectDay(t){this.daysOfMonth=this.selector.querySelectorAll("."+e.MONTH+" ."+e.DAY);for(const e of Object.keys(this.daysOfMonth))this.handleClickInteraction(this.daysOfMonth[e],t),this.props.range&&this.handleMouseInteraction(this.daysOfMonth[e])}handleClickInteraction(t,e){t.addEventListener("click",t=>{const a=b(this.daysOfMonth,t.target);this.days[a].locked||(this.lastSelectedDay=this.days[a].date,this.props.range||(this.props.multiplePick?(this.days[a].date&&(this.daysSelected=this.daysSelected.filter(t=>R(t)!==R(this.lastSelectedDay))),this.days[a].isSelected||this.daysSelected.push(this.lastSelectedDay)):(this.days[a].locked||this.removeStatesClass(),this.daysSelected=[],this.daysSelected.push(this.lastSelectedDay))),function(t,e){t.classList.toggle(e)}(t.target,s.IS_SELECTED),this.days[a].isSelected=!this.days[a].isSelected,this.props.range&&(this.intervalRange.begin&&this.intervalRange.end&&(this.intervalRange={},this.removeStatesClass()),this.intervalRange.begin&&!this.intervalRange.end&&(this.intervalRange.end=this.days[a].date,this.daysSelected=function(t,e,s){const a=[];let i=t;const n=function(t){const e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e.getTime()};for(;i<=e;)a.push(E(i,s)),i=n.call(i,1);return a}(this.intervalRange.begin,this.intervalRange.end,this.langs),y(t.target,s.IS_END_RANGE),this.intervalRange.begin>this.intervalRange.end&&(this.intervalRange={},this.removeStatesClass())),this.intervalRange.begin||(this.intervalRange.begin=this.days[a].date),y(t.target,s.IS_SELECTED)),this.props.onSelect(this.days[a]),e&&e(this.days[a]))})}handleMouseInteraction(t){t.addEventListener("mouseover",t=>{const e=b(this.daysOfMonth,t.target);if(!(!this.intervalRange.begin||this.intervalRange.begin&&this.intervalRange.end)){this.removeStatesClass();for(let t=1;t<=Object.keys(this.days).length;t++)this.days[t].isSelected=!1,I(this.days[e].date,this.intervalRange.begin)&&I(this.days[t].date,this.intervalRange.begin)&&N(this.days[t].date,this.days[e].date)&&(y(this.days[t].element,s.IS_SELECTED),y(this.days[t].element,s.IS_RANGE),M(this.days[t].date,this.intervalRange.begin)&&y(this.days[t].element,s.IS_BEGIN_RANGE))}})}creatWeek(t){l(p("span",{class:e.DAY},t),this.calendar.week)}createMonth(){const t=this.date.getMonth();for(;this.date.getMonth()===t;)this.createDay(this.date),this.date.setDate(this.date.getDate()+1);this.date.setMonth(this.date.getMonth()-1),this.selectDay()}createDay(t){const i=t.getDate(),n=t.getDay();let r={day:i,date:m(t),isWeekend:!1,locked:!1,isToday:!1,isRange:!1,isSelected:!1,isHighlight:!1,attributes:{class:[e.DAY],style:{}},node:void 0,element:void 0};this.days=this.days||{},n!==a.SUNDAY&&n!==a.SATURDAY||(r.attributes.class.push(s.IS_WEEKEND),r.isWeekend=!0),(this.props.locked||this.props.disableDaysOfWeek&&this.props.disableDaysOfWeek.includes(n)||this.props.disablePastDays&&N(this.date,this.defaultDate)||this.props.minDate&&I(this.props.minDate,r.date)||this.props.maxDate&&N(this.props.maxDate,r.date))&&(r.attributes.class.push(s.IS_DISABLED),r.locked=!0),this.props.disableDates&&this.disabledDays(r),this.props.todayHighlight&&M(this.todayDate,r.date)&&(r.attributes.class.push(s.IS_TODAY),r.isToday=!0),this.daysSelected.find(t=>{M(t,r.date)&&(r.attributes.class.push(s.IS_SELECTED),r.isSelected=!0)}),function(t,e,s){return A(s,t)&&k(s,e)}(this.intervalRange.begin,this.intervalRange.end,r.date)&&(r.attributes.class.push(s.IS_RANGE),r.isRange=!0),M(r.date,this.intervalRange.begin)&&r.attributes.class.push(s.IS_BEGIN_RANGE),M(r.date,this.intervalRange.end)&&r.attributes.class.push(s.IS_END_RANGE),this.daysHighlight&&this.highlightDays(r),1===r.day&&(this.props.weekStart===a.SUNDAY?r.attributes.style[this.isRTL]=n*(100/Object.keys(a).length)+"%":n===a.SUNDAY?r.attributes.style[this.isRTL]=(Object.keys(a).length-this.props.weekStart)*(100/Object.keys(a).length)+"%":r.attributes.style[this.isRTL]=(n-1)*(100/Object.keys(a).length)+"%"),r.node=p("div",r.attributes,r.day.toString()),(r=this.props.beforeCreateDay(r)).element=l(r.node,this.calendar.month),this.days[r.day]=r}disabledDays(t){h(this.props.disableDates[0])?this.props.disableDates.map(e=>{I(t.date,e[0])&&N(t.date,e[1])&&(t.attributes.class.push(s.IS_DISABLED),t.locked=!0)}):this.props.disableDates.map(e=>{M(t.date,e)&&(t.attributes.class.push(s.IS_DISABLED),t.locked=!0)})}highlightDays(t){for(const e in this.daysHighlight)this.daysHighlight[e].days[0]instanceof Array?this.daysHighlight[e].days.map(s=>{I(t.date,s[0])&&N(t.date,s[1])&&this.computedAttributes(e,t)}):this.daysHighlight[e].days.map(s=>{M(t.date,s)&&this.computedAttributes(e,t)})}computedAttributes(t,e){const{attributes:a,days:i,...n}=this.daysHighlight[t];e=f(e,n);for(const t in a)e.attributes[t]&&a[t]?e.attributes[t]=f(e.attributes[t],a[t]):a[t]&&(e.attributes[t]=a[t]);e.attributes.class.push(s.IS_HIGHLIGHT),e.isHighlight=!0}monthsAsString(t){return this.props.monthShort?this.langs.monthsShort[t]:this.langs.months[t]}weekAsString(t){return this.props.weekShort?this.langs.daysShort[t]:this.langs.days[t]}mount(){this.calendar.period&&(this.calendar.period.innerHTML=this.monthsAsString(this.date.getMonth())+" "+this.date.getFullYear());const t=[];this.calendar.week.textContent="";for(let e=this.props.weekStart;e<this.langs.daysShort.length;e++)t.push(e);for(let e=0;e<this.props.weekStart;e++)t.push(e);for(const e of t)this.creatWeek(this.weekAsString(e));this.createMonth()}clearCalendar(){this.calendar.month.textContent=""}removeStatesClass(){for(const t of Object.keys(this.daysOfMonth))D(this.daysOfMonth[t],s.IS_SELECTED),D(this.daysOfMonth[t],s.IS_RANGE),D(this.daysOfMonth[t],s.IS_BEGIN_RANGE),D(this.daysOfMonth[t],s.IS_END_RANGE),this.days[+t+1].isSelected=!1}}const H=L;window.HelloWeek=H,t.HelloWeek=H,t.createElement=p,t.default=L,t.el=p,t.render=l}({});
