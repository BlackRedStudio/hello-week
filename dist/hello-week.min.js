const t={CALENDAR:"hello-week",DAY:"day",MONTH:"month",NAVIGATION:"navigation",NEXT:"next",PERIOD:"period",PREV:"prev",RTL:"rtl",WEEK:"week"},e={IS_BEGIN_RANGE:"is-begin-range",IS_DISABLED:"is-disabled",IS_END_RANGE:"is-end-range",IS_HIGHLIGHT:"is-highlight",IS_SELECTED:"is-selected",IS_RANGE:"is-range",IS_TODAY:"is-today",IS_WEEKEND:"is-weekend"},s={FRIDAY:5,MONDAY:1,SATURDAY:6,SUNDAY:0,THURSDAY:4,TUESDAY:2,WEDNESDAY:3},i={selector:".hello-week",lang:"en",langFolder:"../langs/",format:"DD/MM/YYYY",monthShort:!1,weekShort:!0,defaultDate:null,minDate:null,maxDate:null,disableDaysOfWeek:null,disableDates:null,weekStart:0,daysSelected:null,daysHighlight:null,multiplePick:!1,disablePastDays:!1,todayHighlight:!0,range:!1,locked:!1,rtl:!1,nav:["◀","▶"],onLoad:()=>{},onClear:()=>{},onNavigation:()=>{},onSelect:()=>{},beforeCreateDay:t=>t};function a(...t){throw new Error(`[Hello Week Error]: ${t}`)}function n(t){return null!=t}function o(t){return null!==t&&Array.isArray(t)}function h(t){return"string"==typeof t}function l(t,e){if(t.split)return document.createTextNode(t);const s=document.createElement(t.nodeName),i=t.attributes||{};return Object.keys(i).forEach(t=>{"class"===t?h(i[t])?s.className=i[t]:o(i[t])&&i[t].forEach(t=>{d(s,t)}):"style"===t?h(i[t])?s.style=i[t]:function(t){return null!==t&&"object"==typeof t}(i[t])&&Object.keys(i[t]).forEach(e=>{s.style.setProperty(e,i[t][e])}):"dataset"===t?Object.keys(i[t]).forEach(e=>{s.setAttribute("data-"+e,i[t][e])}):s.setAttribute(t,i[t])}),(t.children||[]).forEach(t=>s.appendChild(l(t))),e?e.appendChild(s):s}function r(t,e,...s){const i={nodeName:t};return e&&(i.attributes=e),s.length&&(i.children=[].concat(...s)),i}function d(t,e){return t.classList.add(e)}function c(t,e){return t.classList.remove(e)}function g(t,e){return n(e)?e.querySelector(`.${t}`):document.querySelector(`.${t}`)}function u(t,e){return Object.assign(t,e)}function p(t,e){return Array.prototype.slice.call(t).indexOf(e)+1}function y(t,e){return t===e}function D(t,e,s="YYYY-MM-DD"){const i=new Date(t);return s=(s=(s=(s=(s=(s=(s=(s=(s=(s=s.replace("dd",i.getDate().toString())).replace("DD",(i.getDate()>9?i.getDate():"0"+i.getDate()).toString())).replace("mm",(i.getMonth()+1).toString())).replace("MMM",e.months[i.getMonth()])).replace("MM",(i.getMonth()+1>9?i.getMonth()+1:"0"+(i.getMonth()+1)).toString())).replace("mmm",e.monthsShort[i.getMonth()])).replace("yyyy",i.getFullYear().toString())).replace("YYYY",i.getFullYear().toString())).replace("YY",i.getFullYear().toString().substring(2))).replace("yy",i.getFullYear().toString().substring(2))}function m(t){if(t&&(!isNaN(Number(t))||3!==t.split("-").length))throw new Error(`The date ${t} is not valid!`);return t||"string"==typeof t?new Date(t+"T00:00:00Z").getTime():(new Date).setHours(0,0,0,0)}function S(t){if(t&&(!isNaN(Number(t))||3!==t.split("-").length))throw new Error(`The date ${t} is not valid!`);return t||"string"==typeof t?new Date(t+"T00:00:00Z").getTime():(new Date).setHours(0,0,0,0)}function f(t,e,s){return`${s}-${("0"+(e+1)).slice(-2)}-${("0"+t).slice(-2)}`}function E(t){return n(t)?new Date(t):new Date}function b(t){const e=E(t);return e.setHours(0,0,0,0),e.setDate(e.getDate()-1)}function v(t){const e=E(t);return e.setHours(0,0,0,0),e.setDate(e.getDate()+1)}class k{constructor(e){this.calendar={},this.intervalRange={},this.daysSelected=[],this.options=u(u({},i),e),this.defaultsOptions=u(u({},i),e);const s=function(e,s){const i={};return h(e.selector)||n(e.selector)||a("You need to specify a selector!"),i.selector=e.selector?document.querySelector(e.selector):e.selector,n(i.selector)?e.selector!==t.CALENDAR&&d(i.selector,t.CALENDAR):i.selector=l(r("div",{class:[e.selector,t.CALENDAR]})),i.calendar={},i.calendar.navigation=g(t.NAVIGATION,i.selector),n(i.calendar.navigation)||(i.calendar.navigation=l(r("div",{class:t.NAVIGATION}),i.selector)),n(e.nav[0])&&(i.calendar.prevMonth=l(r("div",{class:t.PREV},e.nav[0]),i.calendar.navigation),i.calendar.prevMonth.addEventListener("click",()=>s.prev.cb())),i.calendar.period=g(t.PERIOD,i.selector),n(i.calendar.period)||(i.calendar.period=l(r("div",{class:t.PERIOD}),i.calendar.navigation)),n(e.nav[1])&&(i.calendar.nextMonth=l(r("div",{class:t.NEXT},e.nav[1]),i.calendar.navigation),i.calendar.nextMonth.addEventListener("click",()=>s.next.cb())),i.calendar.week=g(t.WEEK,i.selector),n(i.calendar.week)||(i.calendar.week=l(r("div",{class:t.WEEK}),i.selector)),i.calendar.month=g(t.MONTH,i.selector),n(i.calendar.month)||(i.calendar.month=l(r("div",{class:t.MONTH}),i.selector)),e.rtl&&(d(i.calendar.week,t.RTL),d(i.calendar.month,t.RTL)),i}(this.options,{prev:{cb:()=>this.prev()},next:{cb:()=>this.next()}});this.selector=s.selector,this.calendar=s.calendar,import(this.options.langFolder+this.options.lang+".js").then(t=>t.default).then(t=>{this.langs=t,this.init()})}destroy(){this.removeStatesClass(),this.selector.remove()}prev(t){const e=this.date.getMonth()-1;this.date.setMonth(e),this.update(),this.options.onNavigation(),t&&t()}next(t){const e=this.date.getMonth()+1;this.date.setMonth(e),this.update(),this.options.onNavigation(),t&&t()}update(){this.clearCalendar(),this.mounted()}reset(t={},e){this.clearCalendar(),this.options=u(t,this.defaultsOptions),this.init(e)}goToDate(t=this.todayDate){this.date=new Date(t),this.date.setDate(1),this.update()}getDays(){return this.daysSelected.map(t=>D(t,this.langs,this.options.format))}getDaySelected(){return this.lastSelectedDay}getDaysHighlight(){return this.daysHighlight}getMonth(){return this.date.getMonth()+1}getYear(){return this.date.getFullYear()}setDaysHighlight(t){this.daysHighlight=[...this.daysHighlight,...t]}setMultiplePick(t){this.options.multiplePick=t}setDisablePastDays(t){this.options.disablePastDays=t}setTodayHighlight(t){this.options.todayHighlight=t}setRange(t){o(this.options.range)?(this.intervalRange.begin=m(this.options.range[0]),this.intervalRange.end=m(this.options.range[1])):this.options.range=t}setLocked(t){this.options.locked=t}setMinDate(t){this.options.minDate=b(t)}setMaxDate(t){this.options.maxDate=v(t)}init(t){this.daysHighlight=this.options.daysHighlight?this.options.daysHighlight:[],this.daysSelected=this.options.daysSelected?this.options.daysSelected:[],this.daysSelected.length>1&&!this.options.multiplePick&&a(`There are ${this.daysSelected.length} dates selected, but the multiplePick option\n                is ${this.options.multiplePick}!`),this.todayDate=S()-1e3*(new Date).getTimezoneOffset()*60,this.date=new Date,this.defaultDate=new Date,this.options.defaultDate&&(this.date=new Date(this.options.defaultDate),this.defaultDate=new Date(this.options.defaultDate),this.defaultDate.setDate(this.defaultDate.getDate())),this.date.setDate(1),this.options.minDate&&this.setMinDate(this.options.minDate),this.options.maxDate&&this.setMaxDate(this.options.maxDate),this.options.range&&this.setRange(this.options.range),this.mounted(),this.options.onLoad(),t&&t()}selectDay(e){this.daysOfMonth=this.selector.querySelectorAll("."+t.MONTH+" ."+t.DAY);for(const t of Object.keys(this.daysOfMonth))this.handleClickInteraction(this.daysOfMonth[t],e),this.options.range&&this.handleMouseInteraction(this.daysOfMonth[t])}handleClickInteraction(t,s){t.addEventListener("click",t=>{const i=p(this.daysOfMonth,t.target);this.days[i].locked||(this.lastSelectedDay=this.days[i].timestamp,this.options.range||(this.options.multiplePick?(this.days[i].timestamp&&(this.daysSelected=this.daysSelected.filter(t=>S(t)!==this.lastSelectedDay)),this.days[i].isSelected||this.daysSelected.push(D(this.lastSelectedDay,this.langs))):(this.days[i].locked||this.removeStatesClass(),this.daysSelected=[],this.daysSelected.push(D(this.lastSelectedDay,this.langs)))),function(t,e){t.classList.toggle(e)}(t.target,e.IS_SELECTED),this.days[i].isSelected=!this.days[i].isSelected,this.options.range&&(this.intervalRange.begin&&this.intervalRange.end&&(this.intervalRange={},this.removeStatesClass()),this.intervalRange.begin&&!this.intervalRange.end&&(this.intervalRange.end=this.days[i].timestamp,this.daysSelected=function(t,e,s){const i=[];let a=t;const n=function(t){const e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e.getTime()};for(;a<=e;)i.push(D(a,s)),a=n.call(a,1);return i}(this.intervalRange.begin,this.intervalRange.end,this.langs),d(t.target,e.IS_END_RANGE),this.intervalRange.begin>this.intervalRange.end&&(this.intervalRange={},this.removeStatesClass())),this.intervalRange.begin||(this.intervalRange.begin=this.days[i].timestamp),d(t.target,e.IS_SELECTED)),this.options.onSelect(),s&&s())})}handleMouseInteraction(t){t.addEventListener("mouseover",t=>{const s=p(this.daysOfMonth,t.target);if(!(!this.intervalRange.begin||this.intervalRange.begin&&this.intervalRange.end)){this.removeStatesClass();for(let t=1;t<=Object.keys(this.days).length;t++)this.days[t].isSelected=!1,this.days[s].timestamp>=this.intervalRange.begin&&this.days[t].timestamp>=this.intervalRange.begin&&this.days[t].timestamp<=this.days[s].timestamp&&(d(this.days[t].element,e.IS_SELECTED),d(this.days[t].element,e.IS_RANGE),this.days[t].timestamp===this.intervalRange.begin&&d(this.days[t].element,e.IS_BEGIN_RANGE))}})}creatWeek(e){l(r("span",{class:t.DAY},e),this.calendar.week)}createMonth(){const t=this.date.getMonth();for(;this.date.getMonth()===t;)this.createDay(this.date),this.date.setDate(this.date.getDate()+1);this.date.setMonth(this.date.getMonth()-1),this.selectDay()}createDay(i){const a=i.getDate(),n=i.getDay();let o={day:a,timestamp:m(f(i.getDate(),i.getMonth(),i.getFullYear())),isWeekend:!1,locked:!1,isToday:!1,isRange:!1,isSelected:!1,isHighlight:!1,attributes:{class:[t.DAY],style:{}},node:void 0,element:void 0};this.days=this.days||{},(y(n,s.SUNDAY)||y(n,s.SATURDAY))&&(o.attributes.class.push(e.IS_WEEKEND),o.isWeekend=!0),(this.options.locked||this.options.disableDaysOfWeek&&this.options.disableDaysOfWeek.includes(n)||this.options.disablePastDays&&+this.date.setHours(0,0,0,0)<=+this.defaultDate.setHours(0,0,0,0)-1||this.options.minDate&&+this.options.minDate>=o.timestamp||this.options.maxDate&&+this.options.maxDate<=o.timestamp)&&(o.attributes.class.push(e.IS_DISABLED),o.locked=!0),this.options.disableDates&&this.setDaysDisable(o),this.options.todayHighlight&&y(this.todayDate,o.timestamp)&&(o.attributes.class.push(e.IS_TODAY),o.isToday=!0),this.daysSelected.find(t=>{(y(t,o.timestamp)||y(m(t.toString()),o.timestamp))&&(o.attributes.class.push(e.IS_SELECTED),o.isSelected=!0)}),function(t,e,s){return s>t&&s<e}(this.intervalRange.begin,this.intervalRange.end,o.timestamp)&&(o.attributes.class.push(e.IS_RANGE),o.isRange=!0),y(o.timestamp,this.intervalRange.begin)&&o.attributes.class.push(e.IS_BEGIN_RANGE),y(o.timestamp,this.intervalRange.end)&&o.attributes.class.push(e.IS_END_RANGE),this.daysHighlight&&this.setDayHighlight(o),1===o.day&&(this.options.weekStart===s.SUNDAY?o.attributes.style[this.options.rtl?"margin-right":"margin-left"]=n*(100/Object.keys(s).length)+"%":n===s.SUNDAY?o.attributes.style[this.options.rtl?"margin-right":"margin-left"]=(Object.keys(s).length-this.options.weekStart)*(100/Object.keys(s).length)+"%":o.attributes.style[this.options.rtl?"margin-right":"margin-left"]=(n-1)*(100/Object.keys(s).length)+"%"),o.node=r("div",o.attributes,o.day.toString()),(o=this.options.beforeCreateDay(o)).element=l(o.node,this.calendar.month),this.days[o.day]=o}setDaysDisable(t){this.options.disableDates[0]instanceof Array?this.options.disableDates.map(s=>{t.timestamp>=S(s[0])&&t.timestamp<=S(s[1])&&(t.attributes.class.push(e.IS_DISABLED),t.locked=!0)}):this.options.disableDates.map(s=>{t.timestamp===S(s)&&(t.attributes.class.push(e.IS_DISABLED),t.locked=!0)})}setDayHighlight(t){for(const e in this.daysHighlight)this.daysHighlight[e].days[0]instanceof Array?this.daysHighlight[e].days.map(s=>{t.timestamp>=S(s[0])&&t.timestamp<=S(s[1])&&this.setStyleDayHighlight(e,t)}):this.daysHighlight[e].days.map(s=>{t.timestamp===S(s)&&this.setStyleDayHighlight(e,t)})}setStyleDayHighlight(t,s){const{attributes:i}=this.daysHighlight[t];for(const t in i)s.attributes[t]&&i[t]?s.attributes[t]=u(s.attributes[t],i[t]):i[t]&&(s.attributes[t]=i[t]);s.attributes.class.push(e.IS_HIGHLIGHT),s.isHighlight=!0}monthsAsString(t){return this.options.monthShort?this.langs.monthsShort[t]:this.langs.months[t]}weekAsString(t){return this.options.weekShort?this.langs.daysShort[t]:this.langs.days[t]}mounted(){const t=[];this.calendar.period&&(this.calendar.period.innerHTML=this.monthsAsString(this.date.getMonth())+" "+this.date.getFullYear()),this.calendar.week.textContent="";for(let e=this.options.weekStart;e<this.langs.daysShort.length;e++)t.push(e);for(let e=0;e<this.options.weekStart;e++)t.push(e);for(const e of t)this.creatWeek(this.weekAsString(e));this.createMonth()}clearCalendar(){this.calendar.month.textContent=""}removeStatesClass(){for(const t of Object.keys(this.daysOfMonth))c(this.daysOfMonth[t],e.IS_SELECTED),c(this.daysOfMonth[t],e.IS_RANGE),c(this.daysOfMonth[t],e.IS_BEGIN_RANGE),c(this.daysOfMonth[t],e.IS_END_RANGE),this.days[+t+1].isSelected=!1}}const A=k;window.HelloWeek=A;export default k;export{A as HelloWeek,r as el};
